using System.Globalization;
using Grasshopper;

var settings = new GrasshopperSettings
{
    Camera = GrasshopperSettings.CameraValues.First(),
    Mode12Bit = false,
};

var cam = new GrasshopperCamera(settings);

var fovs = new int[] { 64, 128, 256, 512 };
// exposures = np.concatenate(
//    (np.linspace(5e-6, 0.8e-3, 100), np.linspace(0.8e-3, 10e-3, 30))
// )
// exposuresString = "new double[] {" + ", ".join([str(exposure) for exposure in exposures]) + "}"
var exposures = new double[] { 5e-06, 1.3030303030303032e-05, 2.106060606060606e-05, 2.9090909090909093e-05, 3.712121212121212e-05, 4.515151515151515e-05, 5.3181818181818186e-05, 6.121212121212121e-05, 6.924242424242424e-05, 7.727272727272727e-05, 8.53030303030303e-05, 9.333333333333333e-05, 0.00010136363636363637, 0.0001093939393939394, 0.00011742424242424243, 0.00012545454545454546, 0.0001334848484848485, 0.00014151515151515154, 0.00014954545454545456, 0.0001575757575757576, 0.00016560606060606062, 0.00017363636363636366, 0.00018166666666666667, 0.00018969696969696972, 0.00019772727272727276, 0.00020575757575757577, 0.00021378787878787882, 0.00022181818181818183, 0.00022984848484848487, 0.0002378787878787879, 0.0002459090909090909, 0.000253939393939394, 0.000261969696969697, 0.00027, 0.00027803030303030307, 0.0002860606060606061, 0.0002940909090909091, 0.0003021212121212121, 0.0003101515151515152, 0.0003181818181818182, 0.0003262121212121212, 0.0003342424242424243, 0.0003422727272727273, 0.0003503030303030303, 0.00035833333333333333, 0.0003663636363636364, 0.0003743939393939394, 0.00038242424242424243, 0.0003904545454545455, 0.0003984848484848485, 0.00040651515151515153, 0.00041454545454545455, 0.0004225757575757576, 0.00043060606060606063, 0.00043863636363636365, 0.00044666666666666666, 0.00045469696969696973, 0.00046272727272727275, 0.00047075757575757576, 0.00047878787878787883, 0.00048681818181818185, 0.0004948484848484849, 0.0005028787878787879, 0.000510909090909091, 0.000518939393939394, 0.000526969696969697, 0.000535, 0.000543030303030303, 0.0005510606060606061, 0.0005590909090909091, 0.0005671212121212122, 0.0005751515151515152, 0.0005831818181818182, 0.0005912121212121212, 0.0005992424242424242, 0.0006072727272727273, 0.0006153030303030304, 0.0006233333333333334, 0.0006313636363636364, 0.0006393939393939394, 0.0006474242424242424, 0.0006554545454545454, 0.0006634848484848486, 0.0006715151515151516, 0.0006795454545454546, 0.0006875757575757576, 0.0006956060606060606, 0.0007036363636363636, 0.0007116666666666667, 0.0007196969696969698, 0.0007277272727272728, 0.0007357575757575758, 0.0007437878787878788, 0.0007518181818181818, 0.0007598484848484849, 0.0007678787878787879, 0.000775909090909091, 0.000783939393939394, 0.000791969696969697, 0.0008, 0.0008, 0.0011172413793103448, 0.0014344827586206896, 0.0017517241379310343, 0.0020689655172413794, 0.002386206896551724, 0.0027034482758620687, 0.0030206896551724137, 0.0033379310344827584, 0.003655172413793103, 0.0039724137931034485, 0.004289655172413793, 0.004606896551724138, 0.0049241379310344825, 0.005241379310344828, 0.005558620689655173, 0.005875862068965517, 0.006193103448275862, 0.0065103448275862065, 0.006827586206896552, 0.007144827586206897, 0.007462068965517241, 0.007779310344827586, 0.00809655172413793, 0.008413793103448275, 0.00873103448275862, 0.009048275862068965, 0.009365517241379311, 0.009682758620689656, 0.01 };

foreach (var use12Bit in new bool[] { false, true })
{

    var data = "";
    var dataExposures = "";

    foreach (var fov in fovs)
    {
        cam.ROI = (fov, fov);

        foreach (var exposure in exposures)
        {
            cam.Exposure = exposure;
            var frametime = 1 / cam.Framerate;
            data += frametime.ToString(CultureInfo.InvariantCulture) + "\t";
            dataExposures += cam.Exposure.ToString(CultureInfo.InvariantCulture) + "\t";
        }
        data += "\n";
        dataExposures += "\n";
    }

    File.WriteAllText($"grasshopper-{(use12Bit ? "12bit" : "10bit")}.dat", data);
    File.WriteAllText($"grasshopper-{(use12Bit ? "12bit" : "10bit")}-exposures.dat", dataExposures);
}